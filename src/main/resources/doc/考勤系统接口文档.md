## 1. 认证相关

### 1.1 注册

**简要描述：** 

- 注册员工信息

**请求URL：** 

- ` https://localhost:8080/auth/register `

**请求方式：**

- POST 

**参数：** 

| 参数名     | 必选 | 类型   | 说明         | 示例                            |
| :--------- | :--- | :----- | ------------ | ------------------------------- |
| e_account  | 是   | string | 员工账户     | 1997104                         |
| e_password | 是   | string | 员工密码     | 123456                          |
| e_name     | 是   | string | 员工姓名     | 杨赟                            |
| e_phone    | 是   | string | 员工电话     | 15607115349                     |
| e_email    | 是   | string | 员工邮箱     | yangyun@abc.com                 |
| e_sex      | 是   | string | 员工性别     | 0男，1女                        |
| e_birthday | 否   | long   | 员工出生日期 | 1994-08-21                      |
| e_role_id  | 否   | int    | 角色         | 0系统管理员，1管理员，2普通员工 |

 **返回示例**

``` javascript
{
	"code": 0,
	"msg": "操作成功",
	"data": null,
}
    
{
	"code": -1,
	"msg": "操作失败",
	"data": null,
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | int    | 0为成功，非0为失败 |
| msg    | string | 具体的失败原因     |
| data   | json   |                    |

 **备注** 

- 无



### 1.2 登录

**简要描述：** 

- 登录-通过用户名和密码

**请求URL：** 

- ` https://localhost:8080/auth/login_by_password `

**请求方式：**

- POST 

**参数：** 

| 参数名     | 必选 | 类型   | 说明               | 示例    |
| :--------- | :--- | :----- | ------------------ | ------- |
| e_account  | 是   | string | 账户、邮箱或者手机 | 1997104 |
| e_password | 是   | string | 密码               | 123456  |
| code       | 是   | string | 验证码             | 0821    |

 **返回示例**

``` javascript
{
	"code": -2,
	"msg": "验证码错误",
	"data": null,
}
    
{
	"code": -1,
	"msg": "账号或错误",
	"data": null,
}

{
	"code": 0,
	"msg": "登录成功",
	"data": null,
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | Int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   |                    |

 **备注** 

- 后端需要通过response的set-cookie字段，用户的cookie，用于之后请求的身份识别



### 1.3 登出

**简要描述：** 

- 登出

**请求URL：** 

- ` https://localhost:8080/auth/login_out `

**请求方式：**

- POST 

**参数：** 

- 无

 **返回示例**

``` javascript
{
	"code": 0,
	"msg": "操作成功",
	"data": null,
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | Int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   |                    |

 **备注** 

- 后端需要通过response清除该用户的cookie



## 2. 员工信息管理

### 2.1 查询员工信息

**简要描述：** 

- 获取所有员工信息

**请求URL：** 

- ` https://localhost:8080/employee/get_employee_info `

**请求方式：**

- POST 

**参数：** 

* 无

 **返回示例**

``` json
{
	"code": 0,
	"msg": "操作成功",
	"data": [
    {
      "e_account":"",
      "e_name":"",
      "e_sex": 1,
      "e_phone":"",
      "e_email":"",
      "e_birthday": 1523004513,
      "e_role":""
    },
    {
     "e_account":"",
      "e_name":"",
      "e_sex": 1,
      "e_phone":"",
      "e_email":"",
      "e_birthday": 1523004513,
      "e_role":""
    }
  ]
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | array  | 员工信息列表       |

 **备注** 

- 需要普通员工权限



### 2.2 修改员工信息

**简要描述：** 

- 修改员工信息

**请求URL：** 

- ` https://localhost:8080/employee/set_employee_info `

**请求方式：**

- POST 

**参数：** 

| 参数名     | 必选 | 类型     | 说明     | 示例               |
| :--------- | :--- | :------- | -------- | ------------------ |
| e_account  | 是   | string   | 员工账户 | 用于确定是哪个员工 |
| e_name     | 否   | string   | 员工姓名 | 杨赟               |
| e_phone    | 否   | string   | 员工电话 | 15607115349        |
| e_email    | 否   | string   | 员工邮箱 | yangyun@abc.com    |
| e_sex      | 否   | 员工性别 | 0男，1女 | 0                  |
| e_birthday | 否   |          | 生日     | 1994-08-21         |

 **返回示例**

``` js
{
	"code": 0,
	"msg": "操作成功",
	"data": null
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   |                    |

 **备注** 

- 需要管理员权限



### 2.3 删除员工信息

**简要描述：** 

- 删除员工信息

**请求URL：** 

- ` https://localhost:8080/employee/del_employee_info `

**请求方式：**

- POST 

**参数：** 

| 参数名        | 必选 | 类型               | 说明                           | 示例    |
| :------------ | :--- | :----------------- | ------------------------------ | ------- |
| e_account_str | 是   | 用于确定是哪个员工 | 删除的账户，多个账户用逗号分隔 | "A,B,C" |

 **返回示例**

``` js
{
	"code": 0,
	"msg": "操作成功",
	"data": null
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   |                    |

 **备注** 

- 需要管理员权限



### 2.4 修改员工角色

**简要描述：** 

- 修改员工角色信息

**请求URL：** 

- ` https://localhost:8080/employee/set_employee_role `

**请求方式：**

- POST 

**参数：** 

| 参数名    | 必选 | 类型               | 说明 | 示例                            |
| :-------- | :--- | :----------------- | ---- | ------------------------------- |
| e_account | 是   | 用于确定是哪个员工 |      |                                 |
| e_role    | 是   | int                | 角色 | 0系统管理员，1管理员，2普通员工 |

 **返回示例**

``` js
{
	"code": 0,
	"msg": "操作成功",
	"data": null
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   |                    |

 **备注** 

- 需要系统管理员权限



## 3. 考勤管理

### 3.1 查询我的考勤记录

**简要描述：** 

- 查询当前用户考勤记录

**请求URL：** 

- ` https://localhost:8080/attendance/get_my_attendance_record `

**请求方式：**

- POST 

**参数：** 

| 参数名    | 必选 | 类型   | 说明     | 示例       |
| :-------- | :--- | :----- | -------- | ---------- |
| from_date | 是   | string | 开始日期 | 2020-01-12 |
| to_date   | 是   | string | 结束日期 | 2020-01-12 |

 **返回示例**

``` javascript
{
	"code": 0,
	"msg": "操作成功",
	"data": [
    {
      "e_account": "ABCOJ081",
      "e_name": "坤宝",
      "a_type": "上班打卡",
      "a_time": "2020-01-12 08:24"
    }, {
      "e_account": "ABCOJ081",
      "e_name": "坤宝",
      "a_type": "上班打卡",
      "a_time": "2020-01-13 08:24"
    }
  ]
}
```

 **返回参数说明** 

| 参数名 | 类型      | 说明               |
| :----- | :-------- | ------------------ |
| code   | int       | 0为成功，非0为失败 |
| msg    | string    | 失败原因           |
| data   | JSONArray | 数组               |

 **备注** 

- 只能看到自己的打卡记录
- 后端从cookie中解析出用户是谁



### 3.2 查询所有员工的考勤记录

**简要描述：** 

- 获取所有员工的考勤记录

**请求URL：** 

- ` https://localhost:8080/attendance/get_employee_attendance_record `

**请求方式：**

- POST 

**参数：** 

| 参数名    | 必选 | 类型   | 说明     |    示例    |
| :-------- | :--- | :----- | -------- | :--------: |
| from_date | 是   | string | 开始日期 | 2020-01-12 |
| to_date   | 是   | string | 结束日期 | 2020-01-12 |

 **返回示例**

``` javascript
{
	"code": 0,
	"msg": "操作成功",
	"data": [
    {
      "e_account": "ABCOJ081",
      "e_name": "坤宝",
      "a_type": "上班打卡",
      "a_time": "2020-01-12 08:24"
    }, {
      "e_account": "ABCOJ081",
      "e_name": "坤宝",
      "a_type": "上班打卡",
      "a_time": "2020-01-13 08:24"
    }
  ]
}
```

 **返回参数说明** 

| 参数名 | 类型      | 说明               |
| :----- | :-------- | ------------------ |
| code   | int       | 0为成功，非0为失败 |
| msg    | string    | 失败原因           |
| data   | JSONArray | 数组               |

 **备注** 

- 需要管理员或系统管理员权限



### 3.3 修改员工的考勤记录

**简要描述：** 

- 修改员工的考勤记录

**请求URL：** 

- ` https://localhost:8080/attendance/set_employee_attendance_record `

**请求方式：**

- POST 

**参数：** 

| 参数名 | 必选 | 类型 | 说明                 | 示例       |
| :----- | :--- | :--- | -------------------- | ---------- |
| a_id   | 是   | int  | 考勤记录id           | "546"      |
| a_type | 否   | int  | 0上班打卡，1下班打卡 | 1          |
| a_time | 否   | long | 打卡时间             | 2020-02-02 |

 **返回示例**

``` javascript
{
	"code": 0,
	"msg": "操作成功",
	"data": null
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   | 数组               |

 **备注** 

- 需要管理员或系统管理员权限



### 3.4 查询考勤分析结果（额外功能）

**简要描述：** 

- 获取考勤信息（考勤分析结果）

**请求URL：** 

- ` https://localhost:8080/attendance/get_attendance_info `

**请求方式：**

- POST 

**参数：** 

| 参数名    | 必选 | 类型   | 说明     | 示例       |
| :-------- | :--- | :----- | -------- | ---------- |
| e_account | 是   | string | 员工账户 | 1997104    |
| from_date | 是   | string | 开始日期 | 2020-01-12 |
| to_date   | 是   | string | 结束日期 | 2020-01-19 |

 **返回示例**

``` javascript
{
	"code": 0,
	"msg": "操作成功",
	"data": {
    "averageWorkingHours": 平均工作时长,
    "attendanceDays": 出勤天数,
    "attendanceShift": 出勤班次，
    "restDays":出勤班次,
    "latenessCount":迟到次数,
    "leaveEarlyCount":早退次数,
    "cardShortageCount":缺卡次数,
    "absenteeismCount":旷工次数
  }
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   | 数组               |

 **备注** 

- 普通员工权限



## 4. 个人中心

### 4.1 修改密码

**简要描述：** 

- 修改密码

**请求URL：** 

- ` https://localhost:8080/pernal_center/set_my_password `

**请求方式：**

- POST 

**参数：** 

| 数名         | 必选 | 类型   | 说明   | 示例      |
| :----------- | :--- | :----- | ------ | --------- |
| old_password | 是   | string | 旧密码 | 123456    |
| new_password | 是   | string | 新密码 | 123456789 |

 **返回示例**

``` javascript
{
	"code": -1,
	"msg": "密码错误",
	"data": null,
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | Int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   |                    |

 **备注** 

- 需要先登录，登录后，在返回头中有set-cookie字段，需要保存cookie，用于身份识别



### 4.2 修改个人信息

**简要描述：** 

- 修改个人信息

**请求URL：** 

- ` https://localhost:8080/pernal_center/set_my_info `

**请求方式：**

- POST 

**参数：** 

| 参数名     | 必选 | 类型     | 说明         | 示例        |
| :--------- | :--- | :------- | ------------ | ----------- |
| e_name     | 是   | string   | 员工姓名     | 赟赟        |
| e_phone    | 是   | string   | 员工电话     | 15607115349 |
| e_email    | 是   | string   | 员工邮箱     |             |
| e_sex      | 是   | 员工性别 | 0男，1女     |             |
| e_birthday | 否   | long     | 10位的时间戳 |             |

 **返回示例**

``` javascript
{
	"code": 0,
	"msg": "操作成功",
	"data": null,
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   |                    |

 **备注** 

- 无





## 5. 权限管理（菜单管理）

### 1.4 获取菜单

**简要描述：** 

- 获取登录用户可以使用的菜单

**请求URL：** 

- ` https://localhost:8080/menu/get_menu `

**请求方式：**

- POST 

**参数：** 

- 

 **返回示例**

``` javascript
{
	"code": 0,
	"msg": "操作成功",
	"data": []
}
```

 **返回参数说明** 

| 参数名 | 类型   | 说明               |
| :----- | :----- | ------------------ |
| code   | int    | 0为成功，非0为失败 |
| msg    | string | 失败原因           |
| data   | json   |                    |

 **备注** 

- 后端从cookie解析出用户是谁，从而获取用户的权限，得到相应的菜单
- 普通员工的菜单

```json
[
	{
		"title": "员工管理",
		"icon": "&#xe655;",
		"href": "../resources/page/user/userList_2.html",
		"spread": true,
		"children": [
			{
				"title": "员工信息",
				"icon": "&#xe66f;",
				"href": "../resources/page/user/userList_2.html",
				"spread": false
			}
		]
	},
	{
		"title": "考勤管理",
		"icon": "&#xe634;",
		"href": "../resources/page/img/images.html",
		"spread": true,
		"children": [
			{
				"title": "考勤信息",
				"icon": "&#xe61c;",
				"href": "../resources/page/news/newsList_2.html",
				"spread": false
			}
		]
	},
	{
		"title": "个人中心",
		"icon": "&#xe716;",
		"href": "",
		"spread": false,
		"children": [
			{
				"title": "个人资料",
				"icon": "&#xe61c;",
				"href": "../resources/page/user/userInfo.html",
				"spread": false
			},
			{
				"title": "修改密码",
				"icon": "&#xe609;",
				"href": "../resources/page/user/changePwd.html",
				"spread": false
			}
		]
	}
]
```



- 管理员的菜单

```json
[
	{
		"title": "员工管理",
		"icon": "&#xe655;",
		"href": "../resources/page/news/newsList.html",
		"spread": true,
		"children": [
			{
				"title": "员工信息",
				"icon": "&#xe66f;",
				"href": "../resources/page/user/userList_1.html",
				"spread": false
			},
			{
				"title": "添加员工",
				"icon": "&#xe665;",
				"href": "../resources/page/user/userAdd_1.html",
				"spread": false
			}
		]
	},
	{
		"title": "考勤管理",
		"icon": "&#xe634;",
		"href": "../resources/page/img/images.html",
		"spread": true,
		"children": [
			{
				"title": "考勤信息",
				"icon": "&#xe61c;",
				"href": "../resources/page/news/newsList.html",
				"spread": false
			}
		]
	},
	{
		"title": "个人中心",
		"icon": "&#xe716;",
		"href": "",
		"spread": false,
		"children": [
			{
				"title": "个人资料",
				"icon": "&#xe61c;",
				"href": "../resources/page/user/userInfo.html",
				"spread": false
			},
			{
				"title": "修改密码",
				"icon": "&#xe609;",
				"href": "../resources/page/user/changePwd.html",
				"spread": false
			}
		]
	}
]
```



- 系统管理员的菜单

```json
[
	{
		"title": "员工管理",
		"icon": "&#xe655;",
		"href": "../resources/page/news/newsList.html",
		"spread": true,
		"children": [
			{
				"title": "员工信息",
				"icon": "&#xe66f;",
				"href": "../resources/page/user/userList_0.html",
				"spread": false
			},
			{
				"title": "添加员工",
				"icon": "&#xe665;",
				"href": "../resources/page/user/userAdd_0.html",
				"spread": false
			}
		]
	},
	{
		"title": "考勤管理",
		"icon": "&#xe634;",
		"href": "../resources/page/img/images.html",
		"spread": true,
		"children": [
			{
				"title": "考勤信息",
				"icon": "&#xe61c;",
				"href": "../resources/page/news/newsList.html",
				"spread": false
			}
		]
	},
	{
		"title": "个人中心",
		"icon": "&#xe716;",
		"href": "",
		"spread": false,
		"children": [
			{
				"title": "个人资料",
				"icon": "&#xe61c;",
				"href": "../resources/page/user/userInfo.html",
				"spread": false
			},
			{
				"title": "修改密码",
				"icon": "&#xe609;",
				"href": "../resources/page/user/changePwd.html",
				"spread": false
			}
		]
	}
]
```







